{"ast":null,"code":"import React,{useState,useEffect}from'react';import{MapTo}from'@adobe/aem-react-editable-components';import axios from'axios';// Open weather API Key\n// For simplicity it is hard coded in the file, ideally this is extracted in to an environment variable\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const API_KEY='c474ccf4227fa4f7368a334506129897';// Logic to render placeholder or component\nconst OpenWeatherEditConfig={emptyLabel:'Weather',isEmpty:function(props){return!props||!props.lat||!props.lon||!props.label;}};// Wrapper function that includes react-open-weather component\n//https://api.openweathermap.org/data/2.5/weather?q=London,uk&APPID=0b2f3e7edd1c616a74810d45e9d659e6&units=metric&mode=html\nfunction ReactWeatherWrapper(props){const{label}=props;const[weather,setWeather]=useState(null);useEffect(()=>{// Fetch weather data from API\nconst fetchData=async()=>{try{const response=await axios.get(`https://api.openweathermap.org/data/2.5/weather?q=${label}&APPID=${API_KEY}&units=metric`);setWeather(response.data);}catch(error){console.log(error);}};fetchData();},[label]);return/*#__PURE__*/_jsxs(\"div\",{className:\"cmp-open-weather\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Weather\"}),weather!==undefined&&weather!=null?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'red'},children:weather.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Temperature : \",weather.main.temp,\" Celcius \",/*#__PURE__*/_jsx(\"img\",{src:`https://openweathermap.org/img/w/${weather.weather[0].icon}.png`,alt:\"weathericon\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Humidity : \",weather.main.humidity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Pressure : \",weather.main.pressure]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Weather is not available\"})]});}export default function OpenWeather(props){// render nothing if component not configured\nif(OpenWeatherEditConfig.isEmpty(props)){return null;}// render ReactWeather component if component configured\n// pass props to ReactWeatherWrapper. These props include the mapped properties from AEM JSON\nreturn ReactWeatherWrapper(props);}// Map OpenWeather to AEM component\nMapTo('ReactOnAEM/components/openweather')(OpenWeather,OpenWeatherEditConfig);","map":{"version":3,"names":["React","useState","useEffect","MapTo","axios","jsx","_jsx","jsxs","_jsxs","API_KEY","OpenWeatherEditConfig","emptyLabel","isEmpty","props","lat","lon","label","ReactWeatherWrapper","weather","setWeather","fetchData","response","get","data","error","console","log","className","children","undefined","style","color","name","main","temp","src","icon","alt","humidity","pressure","OpenWeather"],"sources":["/Users/surendrakti/Desktop/Chaitanya/AEM/SPA_AEM/ReactOnAEM/ui.frontend/src/components/OpenWeather/OpenWeather.js"],"sourcesContent":["import React, { useState,useEffect } from 'react';\nimport {MapTo} from '@adobe/aem-react-editable-components';\nimport axios from 'axios';\n// Open weather API Key\n// For simplicity it is hard coded in the file, ideally this is extracted in to an environment variable\nconst API_KEY = 'c474ccf4227fa4f7368a334506129897';\n\n// Logic to render placeholder or component\nconst OpenWeatherEditConfig = {\n\n    emptyLabel: 'Weather',\n    isEmpty: function(props) {\n        return !props || !props.lat || !props.lon || !props.label;\n    }\n};\n\n// Wrapper function that includes react-open-weather component\n//https://api.openweathermap.org/data/2.5/weather?q=London,uk&APPID=0b2f3e7edd1c616a74810d45e9d659e6&units=metric&mode=html\nfunction ReactWeatherWrapper(props){\nconst { label } = props;\nconst [weather, setWeather] = useState(null);\n\n\n\nuseEffect(() => {\n    // Fetch weather data from API\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\n          `https://api.openweathermap.org/data/2.5/weather?q=${label}&APPID=${API_KEY}&units=metric`\n        );\n        setWeather(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n  \n    fetchData();\n  }, [label]);\n  \n\n    return (\n        <div className=\"cmp-open-weather\">\n            <h1>Weather</h1>\n            { (weather !== undefined && weather !=null) ?\n            <div>\n            <h3 style={{color:'red'}}>{weather.name}</h3> \n            <p>Temperature : {weather.main.temp} Celcius <img src={`https://openweathermap.org/img/w/${weather.weather[0].icon}.png`} alt='weathericon'/></p>\n            <p>Humidity : {weather.main.humidity}</p>\n            <p>Pressure : {weather.main.pressure}</p>\n            </div>\n            : <p>Weather is not available</p>}\n        </div>\n    );\n}\n\nexport default function OpenWeather(props) {\n\n        // render nothing if component not configured\n        if (OpenWeatherEditConfig.isEmpty(props)) {\n            return null;\n        }\n\n        // render ReactWeather component if component configured\n        // pass props to ReactWeatherWrapper. These props include the mapped properties from AEM JSON\n        return ReactWeatherWrapper(props);\n\n}\n\n// Map OpenWeather to AEM component\nMapTo('ReactOnAEM/components/openweather')(OpenWeather , OpenWeatherEditConfig);\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAACC,SAAS,KAAQ,OAAO,CACjD,OAAQC,KAAK,KAAO,sCAAsC,CAC1D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,OAAO,CAAG,kCAAkC,CAElD;AACA,KAAM,CAAAC,qBAAqB,CAAG,CAE1BC,UAAU,CAAE,SAAS,CACrBC,OAAO,CAAE,QAAAA,CAASC,KAAK,CAAE,CACrB,MAAO,CAACA,KAAK,EAAI,CAACA,KAAK,CAACC,GAAG,EAAI,CAACD,KAAK,CAACE,GAAG,EAAI,CAACF,KAAK,CAACG,KAAK,CAC7D,CACJ,CAAC,CAED;AACA;AACA,QAAS,CAAAC,mBAAmBA,CAACJ,KAAK,CAAC,CACnC,KAAM,CAAEG,KAAM,CAAC,CAAGH,KAAK,CACvB,KAAM,CAACK,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAI5CC,SAAS,CAAC,IAAM,CACZ;AACA,KAAM,CAAAkB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,CAC7B,qDAAoDN,KAAM,UAASP,OAAQ,eAC9E,CAAC,CACDU,UAAU,CAACE,QAAQ,CAACE,IAAI,CAAC,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CACpB,CACF,CAAC,CAEDJ,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACJ,KAAK,CAAC,CAAC,CAGT,mBACIR,KAAA,QAAKmB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BtB,IAAA,OAAAsB,QAAA,CAAI,SAAO,CAAI,CAAC,CACbV,OAAO,GAAKW,SAAS,EAAIX,OAAO,EAAG,IAAI,cAC1CV,KAAA,QAAAoB,QAAA,eACAtB,IAAA,OAAIwB,KAAK,CAAE,CAACC,KAAK,CAAC,KAAK,CAAE,CAAAH,QAAA,CAAEV,OAAO,CAACc,IAAI,CAAK,CAAC,cAC7CxB,KAAA,MAAAoB,QAAA,EAAG,gBAAc,CAACV,OAAO,CAACe,IAAI,CAACC,IAAI,CAAC,WAAS,cAAA5B,IAAA,QAAK6B,GAAG,CAAG,oCAAmCjB,OAAO,CAACA,OAAO,CAAC,CAAC,CAAC,CAACkB,IAAK,MAAM,CAACC,GAAG,CAAC,aAAa,CAAC,CAAC,EAAG,CAAC,cACjJ7B,KAAA,MAAAoB,QAAA,EAAG,aAAW,CAACV,OAAO,CAACe,IAAI,CAACK,QAAQ,EAAI,CAAC,cACzC9B,KAAA,MAAAoB,QAAA,EAAG,aAAW,CAACV,OAAO,CAACe,IAAI,CAACM,QAAQ,EAAI,CAAC,EACpC,CAAC,cACJjC,IAAA,MAAAsB,QAAA,CAAG,0BAAwB,CAAG,CAAC,EAChC,CAAC,CAEd,CAEA,cAAe,SAAS,CAAAY,WAAWA,CAAC3B,KAAK,CAAE,CAEnC;AACA,GAAIH,qBAAqB,CAACE,OAAO,CAACC,KAAK,CAAC,CAAE,CACtC,MAAO,KAAI,CACf,CAEA;AACA;AACA,MAAO,CAAAI,mBAAmB,CAACJ,KAAK,CAAC,CAEzC,CAEA;AACAV,KAAK,CAAC,mCAAmC,CAAC,CAACqC,WAAW,CAAG9B,qBAAqB,CAAC"},"metadata":{},"sourceType":"module"}